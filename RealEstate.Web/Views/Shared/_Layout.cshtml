@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
}

<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<head>
    <title>@ViewData["Title"] - Real Estate</title>

    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="author" content="Websmith Solution">
    <meta name="robots" content="index, follow">

    <meta name="keywords" content="real estate, property management, property listings, real estate admin, dashboard, brokers, agents, residential, commercial">
    <meta name="description" content="A complete Real Estate Management Platform for property listings, agents, customers, and workflow automation.">

    <meta property="og:title" content="RealEstatePro - Real Estate Admin Dashboard">
    <meta property="og:description" content="A premium real estate management dashboard for listings, agents, and property analytics.">
    <meta property="og:image" content="@Url.Content("~/images/og-image.png")">
    <meta name="format-detection" content="telephone=no">

    <!-- Mobile Specific -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="@Url.Content("~/images/favicon.png")">

    <!-- Vendor CSS -->
    <link href="@Url.Content("~/vendor/jquery-nice-select/css/nice-select.css")" rel="stylesheet">
    <link href="@Url.Content("~/vendor/dotted-map/css/contrib/jquery.smallipop-0.3.0.min.css")" rel="stylesheet" media="all">

    <!-- Datatable -->
    <link href="@Url.Content("~/vendor/datatables/css/jquery.dataTables.min.css")" rel="stylesheet">
    <link rel="stylesheet" href="@Url.Content("~/vendor/toastr/css/toastr.min.css")">
    <link href="@Url.Content("~/vendor/sweetalert2/dist/sweetalert2.min.css")" rel="stylesheet">

    <!-- Main Style -->
    <link href="@Url.Content("~/css/style.css")" rel="stylesheet">
    <link href="@Url.Content("~/css/custom-select2.css")" rel="stylesheet" />

    <style>
        /* Preloader background */
        /* Loader Overlay */
        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            display: none;
        }

        /* Loader Animation */
        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3F51B5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @@keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .form-label.required {
            color: inherit !important; /* ensures label text stays normal color */
        }

            .form-label.required::after {
                content: " *";
                color: red;
                font-weight: bold;
            }

    </style>
</head>
<body>

    <div id="main-wrapper">

        <div class="nav-header">
            <a href="@Url.Action("Index","Home")" class="brand-logo">
                <h5>Real Estate</h5>
            </a>
            <div class="nav-control">
                <div class="hamburger">
                    <span class="line"></span><span class="line"></span><span class="line"></span>
                </div>
            </div>
        </div>
       
        <div class="header">
            <div class="header-content">
                <nav class="navbar navbar-expand">
                    <div class="collapse navbar-collapse justify-content-between">
                        <div class="header-left">
                        </div>
                        <ul class="navbar-nav header-right">
                            <li class="nav-item dropdown notification_dropdown">
                                <a class="nav-link bell dz-theme-mode" href="javascript:void(0);">
                                    <i id="icon-light" class="fas fa-sun"></i>
                                    <i id="icon-dark" class="fas fa-moon"></i>

                                </a>
                            </li>
                            <li class="nav-item dropdown header-profile">
                                <a class="nav-link" href="javascript:void(0);" role="button" data-bs-toggle="dropdown">

                                    @using Microsoft.AspNetCore.Identity
                                    @using RealEstate.Core.Identity

                                    @inject UserManager<ApplicationUser> UserManager
                                    @inject SignInManager<ApplicationUser> SignInManager
                                    @{
                                        var currentUser = await UserManager.GetUserAsync(User);
                                        var roles = currentUser != null
                                        ? await UserManager.GetRolesAsync(currentUser)
                                        : new List<string>();
                                    }

                                    @if (currentUser != null)
                                    {
                                        <div class="header-info me-3">
                                            <small class="text-end fs-14 font-w400">@currentUser.Email</small>
                                            <small class="text-end text-primary fs-14 font-w500">@roles.FirstOrDefault()</small>
                                        </div>
                                    }


                                    <img src="@Url.Content("~/images/profile/pic1.jpg")" width="20" alt="">
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    @* <a href="@Url.Action("Index","Home")" class="dropdown-item ai-icon">
                                        <svg id="icon-user1" xmlns="http://www.w3.org/2000/svg" class="text-primary" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                        <span class="ms-2">Profile </span>
                                    </a> *@
                                    <a asp-controller="Account" asp-action="ChangePassword" class="dropdown-item ai-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="text-warning" width="18" height="18"
                                             viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M3 11l2-2a4 4 0 0 1 6 0l2 2"></path>
                                            <path d="M7 11v4"></path>
                                            <path d="M17 11v4"></path>
                                            <rect x="5" y="15" width="14" height="5" rx="1" ry="1"></rect>
                                        </svg>
                                        <span class="ms-2">Change Password</span>
                                    </a>
                                    <form asp-controller="Account" asp-action="LogOff" method="post" class="d-inline">
                                        @Html.AntiForgeryToken()
                                        <button type="submit" class="dropdown-item ai-icon border-0 bg-transparent">
                                            <svg id="icon-logout" xmlns="http://www.w3.org/2000/svg" class="text-danger" width="18" height="18"
                                                 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                 stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                                <polyline points="16 17 21 12 16 7"></polyline>
                                                <line x1="21" y1="12" x2="9" y2="12"></line>
                                            </svg>
                                            <span class="ms-2">Logout</span>
                                        </button>
                                    </form>

                                </div>
                            </li>
                            <li class="nav-item">

                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
        <div class="deznav">
            <div class="deznav-scroll">
                <ul class="metismenu" id="menu">
                    <li>
                        <a href="@Url.Action("Index","Home")" >
                            <i class="flaticon-025-dashboard"></i>
                            <span class="nav-text">Dashboard</span>
                        </a>
                        
                    </li>

                    <li>
                        <a class="has-arrow" href="javascript:void(0)" aria-expanded="false">
                            <i class="flaticon-025-dashboard"></i>
                            <span class="nav-text">Master</span>
                        </a>
                        <ul aria-expanded="false">
                            <li>
                                <a asp-controller="Account"
                                   asp-action="Register"
                                   class="word-wrap-menu @(currentController == "Account" && currentAction == "Register" ? "active-sub" : "")">
                                    User Master
                                </a>
                            </li>
                            <li>
                                <a href="#">Dashboard Dark</a>
                            </li>
                        </ul>
                    </li>

                    <li>
                        <a class="has-arrow " href="javascript:void()" aria-expanded="false">
                            <i class="flaticon-050-info"></i>
                            <span class="nav-text">Apps</span>
                        </a>
                        <ul aria-expanded="false">
                            <li><a href="#">Profile</a></li>
                            <li><a href="#">Post Details</a></li>
                            <li>
                                <a class="has-arrow" href="javascript:void()" aria-expanded="false">Email</a>
                                <ul aria-expanded="false">
                                    <li><a href="#">Compose</a></li>
                                    <li><a href="#">Inbox</a></li>
                                    <li><a href="#">Read</a></li>
                                </ul>
                            </li>
                            <li>
                                <a class="has-arrow" href="javascript:void()" aria-expanded="false">Shop</a>
                                <ul aria-expanded="false">
                                    <li><a href="#">Product Grid</a></li>
                                    <li><a href="#">Product List</a></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div class="content-body">
            @RenderBody()
        </div>
        <div class="footer">
            <div class="copyright">
                <p>Copyright © Designed &amp; Developed by <a href="https://websmithsolution.com/" target="_blank">Websmith Solutions</a> 2023</p>
            </div>
        </div>

        <div id="loader" class="loader-overlay">
            <div class="loader"></div>
        </div>
    </div>

    <!-- Required vendors -->
    <script src="@Url.Content("~/vendor/global/global.min.js")"></script>
    <script src="@Url.Content("~/vendor/chart.js/Chart.bundle.min.js")"></script>
    <script src="@Url.Content("~/vendor/jquery-nice-select/js/jquery.nice-select.min.js")"></script>

    <!-- Project script -->
    <!-- Apex Chart -->
    <script src="@Url.Content("~/vendor/apexchart/apexchart.js")"></script>

    <!-- Chart Peity plugin files -->
    <script src="@Url.Content("~/vendor/peity/jquery.peity.min.js")"></script>

    <!-- Dashboard 1 -->
    <script src="@Url.Content("~/js/ThemeJS/dashboard/dashboard-1.js")"></script>

    <!-- JS for Dotted Map -->
    <script src="@Url.Content("~/vendor/dotted-map/js/contrib/jquery.smallipop-0.3.0.min.js")"></script>
    <script src="@Url.Content("~/vendor/dotted-map/js/contrib/suntimes.js")"></script>
    <script src="@Url.Content("~/vendor/dotted-map/js/contrib/color-0.4.1.js")"></script>

    <script src="@Url.Content("~/vendor/dotted-map/js/world.js")"></script>
    <script src="@Url.Content("~/vendor/dotted-map/js/smallimap.js")"></script>
    <script src="@Url.Content("~/js/ThemeJS/dashboard/dotted-map-init.js")"></script>

    <!-- Custom Scripts -->
    <script src="@Url.Content("~/js/ThemeJS/custom.min.js")"></script>
    <script src="@Url.Content("~/js/ThemeJS/deznav-init.js")"></script>
    <script src="@Url.Content("~/js/ThemeJS/demo.js")"></script>
    @* <script src="@Url.Content("~/js/ThemeJS/styleSwitcher.js")"></script> *@

    <script src="@Url.Content("~/vendor/datatables/js/jquery.dataTables.min.js")"></script>
    <script src="@Url.Content("~/js/ThemeJS/plugins-init/datatables.init.js")"></script>
    <!-- Toastr -->
    <script src="@Url.Content("~/vendor/toastr/js/toastr.min.js")"></script>
    <!-- All init script -->
    <script src="@Url.Content("~/js/ThemeJS/plugins-init/toastr-init.js")"></script>
    <script src="@Url.Content("~/js/ProjectJS/CommonJS/Select2Helper.js")"></script>
    <script src="@Url.Content("~/js/ProjectJS/CommonJS/CommonUtilities.js")"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="@Url.Content("~/vendor/sweetalert2/dist/sweetalert2.min.js")"></script>
    <script src="@Url.Content("~/js/ThemeJS/plugins-init/sweetalert.init.js")"></script>
    <script>
        // This runs server-side and outputs a correct absolute base URL like "https://localhost:44308/"
        window.baseURL = '@Url.Content("~/")';
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
